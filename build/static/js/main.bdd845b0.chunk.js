(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a.p+"static/media/acbLogoBlue.30d96b11.png"},148:function(e,t,a){e.exports=a(395)},153:function(e,t,a){},229:function(e,t,a){},395:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),s=(a(153),a(59)),l=a(78),c=a.n(l),m=a(133),u=a(134),h=a(135),d=a(145),f=a(136),g=a(146),p=a(17),v=a(137),b=a.n(v),E=a(84),y=a.n(E),w=a(86),I=a.n(w),S=a(45),T=a.n(S),k=a(24),O=a.n(k),j=a(141),C=a.n(j),A=a(31),D=a.n(A),L=a(61),N=a.n(L),_=a(30),x=a.n(_),J=a(29),B=a.n(J),R=a(88),z=a.n(R),U=a(87),M=a.n(U),W=a(79),H=(a(163),a(147)),X=a(85),q=a.n(X),V=a(80),K=a(22),G=a.n(K),P=a(138),F=a.n(P),Y=(a(229),"".concat("http://localhost:5000","/oauth2/token")),Q={apiKey:"AIzaSyDpn4qBYUHJINdRDnQTH32XWEWRVrD7Htc",authDomain:"acbevents-8e7f8.firebaseapp.com",databaseURL:"https://acbevents-8e7f8.firebaseio.com",projectId:"acbevents-8e7f8",storageBucket:"",messagingSenderId:"72653524490"},$=function(){return{alignItems:"center",display:"flex",fontSize:14,":before":{backgroundColor:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ccc",borderRadius:10,content:null,display:"block",marginRight:8,height:10,width:10}}},Z={control:function(e){return Object(p.a)({},e,{backgroundColor:"white",width:"100%"})},option:function(e,t){t.data,t.isDisabled,t.isFocused,t.isSelected;return Object(p.a)({},e,{backgroundColor:"#ffffff",color:"black",cursor:"default",fontSize:14})},input:function(e){return Object(p.a)({},e,$())},placeholder:function(e){return Object(p.a)({},e,$())},singleValue:function(e,t){var a=t.data;return Object(p.a)({},e,$(a.color))}},ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).handleSuccess=function(){var e=Object(m.a)(c.a.mark(function e(t,n){var r,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.response,n.state,a.setState({isLoading:!0}),i=r.user,o=i.id,G.a.database().ref("Topics/BusinessDeployment/Events/2019/members").orderByChild("email").equalTo(r.user.email).once("value").then(function(e){if(e.exists()){var t=Object.keys(e.val())[0],n={};n.key=t,n.id=o,n.full_name=r.user.full_name,n.updated_full_name=e.child(t).val().updated_full_name,n.job_title=r.user.job_title,n.department=r.user.department,n.mugshot_url=r.user.mugshot_url.replace("48x48","500x500"),n.email=r.user.email,n.phoneNumber=r.user.contact.phone_numbers[0].number,G.a.database().ref("Topics/BusinessDeployment/Events/2019/members/".concat(t)).update(n).then(function(e){a.setState(Object(p.a)({},a.state,{isLoading:!1,userInfo:n,step:1}),function(){a.getRegisteredInfo()})}).catch(function(e){}),setTimeout(function(){a.setState({isLoading:!1})},1e3)}else a.setState(Object(p.a)({},a.state,{isLoading:!1,errorMessage:"B\u1ea1n kh\xf4ng n\u1eb1m trong danh s\xe1ch tham d\u1ef1 s\u1ef1 ki\u1ec7n",showError:!0}))});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleChange=function(e){return function(t){a.setState(Object(s.a)({},e,t.target.value))}},a.registry=function(){!a.state.registrationInfo.willJoin||null!=a.state.registrationInfo.transportationDeparture&&null!==a.state.registrationInfo.transportationArrive&&null!==a.state.registrationInfo.location?a.state.registrationInfo.willJoin||""!==a.state.reason?a.state.registrationInfo.willJoin&&""===a.state.cmnd?a.setState(Object(p.a)({},a.state,{errorMessage:"Xin vui l\xf2ng nh\u1eadp s\u1ed1 CMND / C\u0103n c\u01b0\u1edbc.",showError:!0})):a.state.registrationInfo.willJoin&&void 0!==a.state.roommate&&a.state.roommate.value===a.state.userInfo.updated_full_name?a.setState(Object(p.a)({},a.state,{errorMessage:"Vui l\xf2ng ch\u1ecdn b\u1ea1n c\xf9ng ph\xf2ng kh\xe1c.",showError:!0})):(a.setState({isLoading:!0}),G.a.database().ref("Topics/BusinessDeployment/Events/2019/members").orderByChild("email").equalTo(a.state.userInfo.email).once("value").then(function(e){var t=Object.keys(e.val())[0],n={email:a.state.userInfo.email,full_name:a.state.userInfo.full_name,updated_full_name:a.state.userInfo.updated_full_name,job_title:a.state.userInfo.job_title,department:a.state.userInfo.department,registered:a.state.registrationInfo.willJoin,transportationDeparture:a.state.registrationInfo.transportationDeparture,transportationArrive:a.state.registrationInfo.transportationArrive,location:a.state.registrationInfo.location,staySchedules:a.state.registrationInfo.willJoin?a.state.staySchedules:null,eatSchedules:a.state.registrationInfo.willJoin?a.state.eatSchedules:null,roommateName:a.state.registrationInfo.willJoin?void 0!==a.state.roommate?a.state.roommate:"":null,reason:a.state.reason?a.state.reason:null,cmnd:a.state.cmnd?a.state.cmnd:null,mugshot_url:a.state.userInfo.mugshot_url};G.a.database().ref("Topics/BusinessDeployment/Events/2019/members/".concat(t)).set(n).then(function(e){a.setState(Object(p.a)({},a.state,{isLoading:!1,completed:!0,showError:!0,errorMessage:"\u0110\u0103ng k\xfd th\xe0nh c\xf4ng"}))})})):a.setState(Object(p.a)({},a.state,{errorMessage:"Xin vui l\xf2ng nh\u1eadp l\xfd do kh\xf4ng tham d\u1ef1 s\u1ef1 ki\u1ec7n.",showError:!0})):a.setState(Object(p.a)({},a.state,{errorMessage:"Xin vui l\xf2ng ch\u1ecdn ph\u01b0\u01a1ng ti\u1ec7n di chuy\u1ec3n \u0111i/v\u1ec1 v\xe0 n\u01a1i c\u01b0 tr\xfa hi\u1ec7n t\u1ea1i.",showError:!0}))},a.getEventDetails=function(){G.a.database().ref("Topics/BusinessDeployment/Events/2019/programDetails").once("value").then(function(e){var t=[];e.forEach(function(e){var n="";if(e.hasChild("email")){var r=e.val().email;a.state.eventUsers.forEach(function(e){e.email===r&&(n=e.mugshot_url.replace("48x48","500x500"))})}var i={time:e.val().startTime,date:e.val().date,title:e.val().title,description:"''"!==e.val().host?e.val().host:null,allow:e.val().allow,key:e.key,imageUrl:n};t.push(i)}),a.setState(Object(p.a)({},a.state,{isLoading:!1,eventTimelineData:t}))})},a.state={isLoading:!1,step:0,registrationInfo:{willJoin:!0,transportationDeparture:null,transportationArrive:null,location:null},eventTimelineData:[],reason:"",cmnd:"",completed:!1,flex:"column"},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){G.a.apps.length||G.a.initializeApp(Q),this.getRegistryData()}},{key:"getTransporationTypes",value:function(){var e=this;G.a.database().ref("TransportationTypeArriveTypes").once("value").then(function(t){var a=Object.values(t.val()),n=[];a.forEach(function(e){n.push(e.name)}),e.setState({transTypesArrive:n})}),G.a.database().ref("TransportationTypeDepartureTypes").once("value").then(function(t){var a=Object.values(t.val()),n=[];a.forEach(function(e){n.push(e.name)}),e.setState({transTypesDeparture:n})})}},{key:"getLocations",value:function(){var e=this;G.a.database().ref("Locations").once("value").then(function(t){var a=Object.values(t.val()),n=[];a.forEach(function(e){n.push(e.name)}),e.setState({locations:n})})}},{key:"getEventUsersAndSchedules",value:function(){var e=this;G.a.database().ref("Topics/BusinessDeployment/Events/2019").once("value").then(function(t){for(var a=t.val().members,n=Object.values(a),r=[],i=0;i<n.length;i++)r.push({value:n[i].updated_full_name,label:n[i].updated_full_name,email:n[i].email,mugshot_url:n[i].mugshot_url});for(var o=t.val().staySchedules,s=Object.values(o),l=[],c=0;c<s.length;c++)l.push({id:c,name:s[c].name,checked:!1});for(var m=t.val().eatSchedules,u=Object.values(m),h=[],d=0;d<u.length;d++)h.push({id:d,name:u[d].name,checked:!1});e.setState(Object(p.a)({},e.state,{eventUsers:r,eatSchedules:h,staySchedules:l}),function(){e.getEventDetails()})})}},{key:"getRegisteredInfo",value:function(){var e=this;G.a.database().ref("Topics/BusinessDeployment/Events/2019/members").orderByChild("email").equalTo(this.state.userInfo.email).once("value").then(function(t){var a=Object.keys(t.val())[0];t.child(a).hasChild("registered")&&e.setState(Object(p.a)({},e.state,{registrationInfo:{willJoin:t.child(a).val().registered,transportationDeparture:t.child(a).val().transportationDeparture,transportationArrive:t.child(a).val().transportationArrive,location:t.child(a).val().location},staySchedules:t.child(a).val().staySchedules,eatSchedules:t.child(a).val().eatSchedules,roommateName:t.child(a).val().registered?t.child(a).val().roommateName:null,reason:t.child(a).val().reason,cmnd:t.child(a).val().cmnd,completed:!0}))})}},{key:"getRegistryData",value:function(){this.getEventUsersAndSchedules(),this.getTransporationTypes(),this.getLocations()}},{key:"updateDimensions",value:function(){window.innerWidth<1e3?this.setState({flex:"column"}):this.setState({flex:"row"})}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(F.a,{loading:this.state.isLoading,bgColor:"#f1f1f1",spinnerColor:"#9ee5f8",textColor:"#676767",text:"Xin vui l\xf2ng \u0111\u1ee3i trong gi\xe2y l\xe1t!"}):0===this.state.step?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"TRI\u1ec2N KHAI KINH DOANH 2019"),r.a.createElement(V.b,{authorizeUrl:"https://www.yammer.com/oauth2/authorize",clientId:"F3tSSYr2nCqndlGTrbWug",redirectUri:"http://localhost:5000",render:function(t){var a=t.url;return r.a.createElement(y.a,{variant:"contained",color:"primary",href:a,disabled:e.state.isLoading},"\u0110\u0102NG NH\u1eacP")}}),r.a.createElement(V.a,{tokenUrl:Y,onAuthSuccess:this.handleSuccess,onAuthError:this.handleError})),r.a.createElement(q.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showError,autoHideDuration:5e3,onClose:function(){e.setState({showError:!1})},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errorMessage)})):r.a.createElement("div",{style:{padding:10,display:"flex",flexDirection:this.state.flex}},r.a.createElement("div",{className:"App-form"},r.a.createElement("div",{style:{textAlign:"center",marginTop:10,height:120,width:120,borderRadius:60,backgroundColor:"#dbdbdb"}},r.a.createElement(I.a,{src:this.state.userInfo.mugshot_url,style:{width:120,height:120}})),r.a.createElement("div",{style:{marginTop:10,color:"#1f419b",fontWeight:"bold",fontSize:"1rem"}},this.state.userInfo.updated_full_name),r.a.createElement("div",{style:{marginTop:10,color:"black",fontWeight:"bold",fontSize:"0.9rem"}},this.state.userInfo.job_title),r.a.createElement("div",{style:{marginTop:10,color:"#676767",fontSize:"0.9rem"}},this.state.userInfo.department),r.a.createElement(T.a,{row:!0,style:{marginTop:10,marginBottom:10}},r.a.createElement(O.a,{control:r.a.createElement(C.a,{disabled:this.state.completed,checked:this.state.registrationInfo.willJoin,color:"primary",onChange:function(){e.setState(Object(p.a)({},e.state,{registrationInfo:Object(p.a)({},e.state.registrationInfo,{willJoin:!e.state.registrationInfo.willJoin})}))},value:this.state.willJoin}),label:"X\xe1c nh\u1eadn tham d\u1ef1"})),this.state.registrationInfo.willJoin&&r.a.createElement("div",null,r.a.createElement("div",{style:{width:"80%"}},r.a.createElement(M.a,{id:"standard-multiline-flexible",label:"CMND/C\u0103n c\u01b0\u1edbc",disabled:this.state.completed,style:{marginLeft:20,marginRight:20,width:300},value:this.state.cmnd,onChange:this.handleChange("cmnd"),fullWidth:!0,margin:"normal"})),r.a.createElement("div",{style:{marginLeft:20,marginTop:30,width:"100%"}},r.a.createElement(x.a,{component:"fieldset",style:{marginRight:80}},r.a.createElement(B.a,{component:"legend"},"N\u01a1i l\u01b0u tr\xfa"),r.a.createElement(N.a,{"aria-label":"N\u01a1i l\u01b0u tr\xfa:",name:"transLocation",value:this.state.registrationInfo?this.state.registrationInfo.location:"",onChange:function(t){e.setState(Object(p.a)({},e.state,{registrationInfo:Object(p.a)({},e.state.registrationInfo,{location:t.target.value})}))}},!this.state.completed&&this.state.locations&&this.state.locations.map(function(e){return r.a.createElement(O.a,{value:e,control:r.a.createElement(D.a,{color:"primary"}),label:e})}),this.state.completed&&this.state.locations&&this.state.locations.map(function(t){return r.a.createElement(O.a,{disabled:!0,value:t,control:r.a.createElement(D.a,{checked:t===e.state.registrationInfo.location,color:"primary"}),label:t})}))),r.a.createElement(x.a,{component:"fieldset",style:{marginRight:80}},r.a.createElement(B.a,{component:"legend"},"Di chuy\u1ec3n chi\u1ec1u \u0111i"),r.a.createElement(N.a,{"aria-label":"Di chuy\u1ec3n chi\u1ec1u \u0111i",name:"transTypeDeparture",value:this.state.registrationInfo?this.state.registrationInfo.transportationDeparture:"",onChange:function(t){e.setState(Object(p.a)({},e.state,{registrationInfo:Object(p.a)({},e.state.registrationInfo,{transportationDeparture:t.target.value})}))}},!this.state.completed&&this.state.transTypesDeparture&&this.state.transTypesDeparture.map(function(e){return r.a.createElement(O.a,{value:e,control:r.a.createElement(D.a,{color:"primary"}),label:e})}),this.state.completed&&this.state.transTypesDeparture&&this.state.transTypesDeparture.map(function(t){return r.a.createElement(O.a,{disabled:!0,value:t,control:r.a.createElement(D.a,{checked:t===e.state.registrationInfo.transportationDeparture,color:"primary"}),label:t})}))),r.a.createElement(x.a,{component:"fieldset"},r.a.createElement(B.a,{component:"legend"},"Di chuy\u1ec3n chi\u1ec1u v\u1ec1"),r.a.createElement(N.a,{"aria-label":"Ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c di chuy\u1ec3n chi\u1ec1u v\u1ec1",name:"transTypeArrive",value:this.state.registrationInfo?this.state.registrationInfo.transportationArrive:"",onChange:function(t){e.setState(Object(p.a)({},e.state,{registrationInfo:Object(p.a)({},e.state.registrationInfo,{transportationArrive:t.target.value})}))}},!this.state.completed&&this.state.transTypesArrive&&this.state.transTypesArrive.map(function(e){return r.a.createElement(O.a,{value:e,control:r.a.createElement(D.a,{color:"primary"}),label:e})}),this.state.completed&&this.state.transTypesArrive&&this.state.transTypesArrive.map(function(t){return r.a.createElement(O.a,{disabled:!0,value:t,control:r.a.createElement(D.a,{checked:t===e.state.registrationInfo.transportationArrive,color:"primary"}),label:t})})))),r.a.createElement("div",{style:{marginLeft:20,marginTop:30,width:"100%"}},r.a.createElement(x.a,{component:"fieldset",style:{marginRight:100}},r.a.createElement(B.a,{component:"legend"},"X\xe1c nh\u1eadn l\u01b0u tr\xfa"),r.a.createElement(T.a,null,this.state.staySchedules.map(function(t,a){return r.a.createElement(O.a,{control:r.a.createElement(z.a,{disabled:e.state.completed,checked:t.checked,onChange:function(){var t=e.state.staySchedules;t[a].checked=!t[a].checked,e.setState({staySchedules:t})},value:t.name,color:"primary"}),label:t.name})}))),r.a.createElement(x.a,{component:"fieldset"},r.a.createElement(B.a,{component:"legend"},"\u0110\u0103ng k\xfd b\u1eefa \u0103n"),r.a.createElement(T.a,null,this.state.eatSchedules.map(function(t,a){return r.a.createElement(O.a,{control:r.a.createElement(z.a,{disabled:e.state.completed,checked:t.checked,onChange:function(){var t=e.state.eatSchedules;t[a].checked=!t[a].checked,e.setState({eatSchedules:t})},value:t.checked,color:"primary"}),label:t.name})})))),r.a.createElement("div",{style:{marginLeft:20,marginTop:30,width:300}},r.a.createElement(H.a,{isDisabled:this.state.completed,value:this.state.roommate,onChange:function(t){e.setState({roommate:t})},options:this.state.eventUsers,isSearchable:!0,styles:Z,placeholder:"Ch\u1ecdn b\u1ea1n c\xf9ng ph\xf2ng"}))),!this.state.registrationInfo.willJoin&&r.a.createElement("div",{style:{width:400}},r.a.createElement(M.a,{id:"standard-multiline-flexible-more",label:"L\xfd do t\u1eeb ch\u1ed1i",multiline:!0,disabled:this.state.completed,value:this.state.reason,onChange:this.handleChange("reason"),fullWidth:!0,margin:"normal"})),!this.state.completed&&r.a.createElement("div",{style:{marginTop:30,marginBottom:30,textAlign:"center",flexDirection:"column"}},r.a.createElement(y.a,{variant:"contained",color:"primary",size:"large",onClick:this.registry},"\u0110\u0102NG K\xdd"),this.state.showError&&r.a.createElement("div",{className:"App-error"},r.a.createElement("span",null,this.state.errorMessage)))),r.a.createElement("div",{style:{flex:2,backgroundColor:"#f7f7f7",margin:10}},r.a.createElement(W.VerticalTimeline,null,this.state.eventTimelineData.map(function(e,t){return r.a.createElement(W.VerticalTimelineElement,{className:"vertical-timeline-element-work",date:"".concat(e.date,"\n").concat(e.time),iconStyle:{background:t%2===0?"#1f419b":"rgb(33, 150, 243)",color:"#fff"},icon:r.a.createElement(I.a,{src:e.imageUrl,style:""!==e.imageUrl?{width:"100%",height:"100%"}:{width:"0%"}})},r.a.createElement("h3",{className:"vertical-timeline-element-title"},e.title),r.a.createElement("p",null,e.description))}))),r.a.createElement(q.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showError,autoHideDuration:5e3,onClose:function(){e.setState({showError:!1})},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errorMessage)}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,2,1]]]);
//# sourceMappingURL=main.bdd845b0.chunk.js.map